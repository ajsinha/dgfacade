# =============================================================================
# DGFacade - Data Gateway Facade Configuration
# Copyright Â© 2025-2030 Ashutosh Sinha. All Rights Reserved. Patent Pending.
# =============================================================================

# --- Application ---
dgfacade.app-name=DGFacade
dgfacade.version=1.2.0
spring.application.name=dgfacade

# --- Server ---
server.port=8080
server.servlet.context-path=/

# --- Configuration Paths ---
dgfacade.config.handlers-dir=config/handlers
dgfacade.config.users-file=config/users.json
dgfacade.config.apikeys-file=config/apikeys.json
dgfacade.config.external-libs-dir=./libs

# --- Default TTL (minutes) ---
dgfacade.handler.default-ttl=30

# --- Thymeleaf ---
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/

# --- Logging ---
logging.level.com.dgfacade=INFO
logging.level.org.apache.pekko=INFO
logging.file.name=logs/dgfacade.log

# --- Handler execution log (separate file) ---
dgfacade.handler-log.file=logs/handler-executions.log

# --- Pekko ---
pekko.loglevel=INFO
pekko.actor.default-dispatcher.fork-join-executor.parallelism-min=8
pekko.actor.default-dispatcher.fork-join-executor.parallelism-max=64
pekko.actor.default-dispatcher.fork-join-executor.parallelism-factor=3.0

# --- Broker Configuration (JSON file-based) ---
dgfacade.brokers.config-dir=config/brokers
dgfacade.brokers.connection-timeout=30000
dgfacade.brokers.max-reconnect-attempts=10
dgfacade.brokers.reconnect-backoff-ms=1000

# --- Channel Configuration (JSON file-based) ---
dgfacade.channels.config-dir=config/channels
dgfacade.channels.default-queue-depth=10000
dgfacade.channels.backpressure-warning-pct=70
dgfacade.channels.backpressure-critical-pct=90
dgfacade.channels.fanout-thread-pool-size=16

# --- Actuator & Prometheus ---
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.distribution.percentiles-histogram.dgfacade.handler.execution.duration=true
management.metrics.distribution.percentiles.dgfacade.handler.execution.duration=0.5,0.9,0.95,0.99

# --- Graceful Shutdown ---
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s
