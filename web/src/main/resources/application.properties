# =============================================================================
# DGFacade - Data Gateway Facade Configuration
# Copyright Â© 2025-2030 Ashutosh Sinha. All Rights Reserved.
# =============================================================================

# --- Application ---
dgfacade.app-name=DGFacade
dgfacade.version=1.6.1
spring.application.name=dgfacade

# --- Author & Copyright ---
dgfacade.author.name=Ashutosh Sinha
dgfacade.author.email=ajsinha@gmail.com
dgfacade.author.github=https://github.com/ajsinha
dgfacade.copyright=Copyright \u00A9 2025-2030 Ashutosh Sinha. All Rights Reserved.

# --- Server ---
server.port=8090
server.address=0.0.0.0
server.servlet.context-path=/

# --- Configuration Paths ---
dgfacade.config.handlers-dir=config/handlers
dgfacade.config.users-file=config/users.json
dgfacade.config.apikeys-file=config/apikeys.json
dgfacade.config.external-libs-dir=./libs

# --- Default TTL (minutes) ---
dgfacade.handler.default-ttl=30

# --- Thymeleaf ---
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/

# --- Logging ---
logging.level.com.dgfacade=INFO
logging.level.org.apache.pekko=INFO
logging.file.name=logs/dgfacade.log

# --- Handler execution log (separate file) ---
dgfacade.handler-log.file=logs/handler-executions.log

# --- Pekko ---
pekko.loglevel=INFO
pekko.actor.default-dispatcher.fork-join-executor.parallelism-min=8
pekko.actor.default-dispatcher.fork-join-executor.parallelism-max=64
pekko.actor.default-dispatcher.fork-join-executor.parallelism-factor=3.0

# --- Broker Configuration (JSON file-based) ---
dgfacade.brokers.config-dir=config/brokers
dgfacade.brokers.connection-timeout=30000
dgfacade.brokers.max-reconnect-attempts=10
dgfacade.brokers.reconnect-backoff-ms=1000

# --- Input Channel Configuration (JSON file-based) ---
dgfacade.input-channels.config-dir=config/input-channels
dgfacade.input-channels.default-queue-depth=10000
dgfacade.input-channels.backpressure-warning-pct=70
dgfacade.input-channels.backpressure-critical-pct=90
dgfacade.input-channels.fanout-thread-pool-size=16

# --- Output Channel Configuration (JSON file-based) ---
dgfacade.output-channels.config-dir=config/output-channels
dgfacade.output-channels.default-queue-depth=10000
dgfacade.output-channels.backpressure-warning-pct=70
dgfacade.output-channels.backpressure-critical-pct=90
dgfacade.output-channels.fanin-thread-pool-size=16

# --- Actuator & Prometheus ---
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.distribution.percentiles-histogram.dgfacade.handler.execution.duration=true
management.metrics.distribution.percentiles.dgfacade.handler.execution.duration=0.5,0.9,0.95,0.99

# --- Graceful Shutdown ---
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# --- Cluster Configuration ---
# Leave seed-nodes empty for standalone mode (default).
# For cluster mode, set to comma-separated list of peer node URLs:
#   dgfacade.cluster.seed-nodes=http://node2:8090,http://node3:8090
dgfacade.cluster.seed-nodes=
dgfacade.cluster.node-role=BOTH
dgfacade.cluster.heartbeat-seconds=15

# --- Request Ingestion Configuration ---
dgfacade.ingesters.config-dir=config/ingesters

# --- Author & Project Metadata ---
dgfacade.author=Ashutosh Sinha
dgfacade.author.email=ajsinha@gmail.com
dgfacade.copyright=Copyright \u00a9 2025-2030 Ashutosh Sinha. All Rights Reserved.
dgfacade.github=https://github.com/ajsinha/dgfacade

# --- Python Handler Worker Pool (Py4J) ---
dgfacade.python.config-dir=config/python

# --- Python Worker Pool (Py4J) ---
# Disabled by default. Enable via config/python/py4j.json
dgfacade.python.config-dir=config/python
dgfacade.python.config-file=py4j.json
